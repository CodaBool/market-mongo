component: express
name: ${env:REPO}-stripe-webhook # makes up the infra names using = this.name-hash-${thing}
app: coda-market
org: codabool
stage: ${env:STAGE}

domain:
  dev: ['dev', codattest.com]
  prod: codattest.com

url:
  dev: https://dev.codattest.com 
  prod: https://www.codattest.com

inputs:
  src: ./ # path to the source folder
  env:
    STRIPE_SK: ${env:STRIPE_SK}
    MONGODB_URI: ${env:MONGODB_URI}
    NEXT_PUBLIC_NEXTAUTH_URL: ${url.${stage}}
    STAGE: ${stage}
    STRIPE_PK: ${env:STRIPE_PK}
    BUILD_ID: ${env:BUILD_ID}
    NODE_ENV: production # TODO: make conditional to dev if dev stage
  # domain: ${domain.${stage}}
  # name: a-${env:what}
  # roleName: my-custom-role-name-${env:what} # custom AWS IAM Role name

# found in wild
# functionConf:
#     name: ${name}